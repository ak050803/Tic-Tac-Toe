<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Ultimate Tic Tac Toe</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <div class="container text-center py-4">
    <h1 class="glow-text mb-3"><i class="fas fa-gamepad"></i> Tic Tac Toe</h1>

    <div class="mb-3 d-flex flex-wrap justify-content-center gap-2">
      <button class="btn btn-primary" onclick="setMode('pvc')">
        <i class="fa-solid fa-robot"></i> Play vs Computer
      </button>
      <button class="btn btn-warning" onclick="setMode('pvp_local')">
        <i class="fa-solid fa-users"></i> Local Multiplayer
      </button>
      <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#generateModal" onclick="generateCode()">
        <i class="fa-solid fa-key"></i> Generate Code
      </button>
      <button class="btn btn-info" data-bs-toggle="modal" data-bs-target="#enterModal">
        <i class="fa-solid fa-right-to-bracket"></i> Enter Code
      </button>
    </div>

    <div id="scoreBoard" class="scoreboard d-flex justify-content-around my-3">
      <div><i class="fa-solid fa-user"></i> X: <span id="xScore">0</span></div>
      <div><i class="fa-solid fa-user"></i> O: <span id="oScore">0</span></div>
      <div><i class="fa-solid fa-circle-pause"></i> Draws: <span id="drawScore">0</span></div>
    </div>

    <div class="board-wrapper position-relative">
      <div id="gameBoard" class="game-board mx-auto"></div>
      <div id="winLine" class="win-line"></div>
    </div>

    <div class="mt-3 fs-5" id="statusText">Select a mode!</div>
    <button class="btn btn-danger mt-3" onclick="resetGame()">üîÅ Reset</button>
    <div class="mt-2 text-muted"><small>Game Code: <span id="gameCodeDisplay">‚Äî</span></small></div>
  </div>

  <!-- Generate Code Modal -->
  <div class="modal fade" id="generateModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-light text-dark text-center">
        <div class="modal-header">
          <h5 class="modal-title">Your Game Code</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <h4 id="modalGameCode" class="text-primary"></h4>
        </div>
      </div>
    </div>
  </div>

  <!-- Enter Code Modal -->
  <div class="modal fade" id="enterModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-light text-dark text-center">
        <div class="modal-header">
          <h5 class="modal-title">Join Game</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p>Welcome! Please enter the game code:</p>
          <input id="gameCodeInput" type="text" class="form-control mb-2 text-center" placeholder="e.g. ABC123"/>
          <button class="btn btn-success" onclick="joinGame()">Join</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyC7Yfox2zh-2LlVR98OVWuJdTnt-yVG0gw",
      authDomain: "tictactoegame-236f5.firebaseapp.com",
      databaseURL: "https://tictactoegame-236f5-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "tictactoegame-236f5",
      storageBucket: "tictactoegame-236f5.appspot.com",
      messagingSenderId: "141003567707",
      appId: "1:141003567707:web:c63c5cdfeb4a60ef50857e",
      measurementId: "G-SGFX839B82"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
